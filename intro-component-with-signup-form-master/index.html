<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
  <link rel="icon" type="image/png" sizes="32x32" href="./images/favicon-32x32.png">
  <title>Intro component with sign up form</title>
  <link href="https://fonts.googleapis.com/css?family=Poppins:400,400i,500,600,700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://necolas.github.io/normalize.css/8.0.1/normalize.css">
  <link rel="stylesheet" type="text/css" href="public/css/styles.css">
</head>
<body>
  <main>
    <div class="main-header">
      <p class="header-title">Learn to code by watching others</p>
      <p class="header-desc">See how experienced developers solve problems in real-time. Watching scripted tutorials is great, but understanding how developers think is invaluable.</p> 
    </div>
    <div class="main-content">
      <div class="main-pricing">
        <p class="main-pricing-desc">Try it free for 7 days, </p>
      </div>
      <div class="main-form">
        <div class="input-container" id="first-name-input-container">
          <input type="text" name="first-name" id="first-name-input" class="form-input off" placeholder="First Name" autocomplete="off">
          <img id="first-name-error-icon" class="error-icon off" src="images/icon-error.svg">
          <p id="first-name-warning" class="warning-text off">First name cannot be empty</p>  
        </div>
        <div class="input-container" id="last-name-input-container">
          <input type="text" name="last-name" id="last-name-input" class="form-input off" placeholder="Last Name" autocomplete="off">
          <img id="last-name-error-icon" class="error-icon off" src="images/icon-error.svg">
          <p id="last-name-warning" class="warning-text off">Last name cannot be empty</p>  
        </div>
        <div class="input-container" id="email-input-container">
          <input type="text" name="email" id="email-input" class="form-input off" placeholder="Email Address" autocomplete="off">
          <img id="email-error-icon" class="error-icon off" src="images/icon-error.svg">
          <p id="email-warning" class="warning-text off">Please enter a valid email</p>  
        </div>
        <div class="input-container" id="password-input-container">
          <input type="password" name="password" id="password-input" class="form-input off" placeholder="Password" autocomplete="off">
          <img id="password-error-icon" class="error-icon off" src="images/icon-error.svg">
          <p id="password-warning" class="warning-text off">Please enter a password</p>  
        </div>
        <button id="form-submit">Claim your free trial</button>
        <p class="form-tos">By signing up, you are agreeing to our </p>
      </div>
    </div>
  </main>
  <script>
    
    window.onload = () => {
      
      let submitButton = document.getElementById("form-submit");
      
      let firstNameInput = document.getElementById("first-name-input-container");
      let lastNameInput = document.getElementById("last-name-input-container");
      let emailInput = document.getElementById("email-input-container");
      let passwordInput = document.getElementById("password-input-container");
      
      submitButton.addEventListener("click", () => {
        let firstName = document.getElementById("first-name-input").value;
        let lastName = document.getElementById("last-name-input").value;
        let email = document.getElementById("email-input").value;
        let password = document.getElementById("password-input").value;
                                
        if (firstName.length == 0) {
          displayAlert(firstNameInput);
        } else {
          removeAlert(firstNameInput);
        }
        if (lastName.length == 0) {
          displayAlert(lastNameInput);
        } else {
          removeAlert(lastNameInput);
        }
        if (!validateEmail(email)) {
          displayAlert(emailInput);
        } else {
          removeAlert(emailInput);
        }
        if (password.length == 0) {
          displayAlert(passwordInput);
        } else {
          removeAlert(passwordInput);
        }
      });
      
      let displayAlert = (element) => {
        element.childNodes.forEach(elem => {
            if (elem.nodeType != 3 && !element.classList.contains("on")) {
              elem.classList.remove("off");
              elem.classList.add("on");
            }
        });
      }
      
      let removeAlert = (element) => {
        element.childNodes.forEach(elem => {
            if (elem.nodeType != 3 && !element.classList.contains("off")) {
              elem.classList.remove("on");
              elem.classList.add("off");
            }
        });
      }
      
      function validateEmail(email) {
          var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
          return re.test(String(email).toLowerCase());
      }
      
    }
    
  </script>
</body>
</html>